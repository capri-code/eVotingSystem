<h2 mat-dialog-title>
  <mat-icon color="primary">add_circle</mat-icon>
  Krijo Zgjedhje të Re
</h2>

<mat-dialog-content>
  <form [formGroup]="electionForm">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Emri i Zgjedhjes</mat-label>
      <input matInput formControlName="name" placeholder="p.sh. Zgjedhjet Lokale 2024">
      <mat-icon matSuffix>label</mat-icon>
      <mat-error>{{ getErrorMessage('name') }}</mat-error>
      <mat-hint>Vendosni një emër të qartë dhe përshkrues</mat-hint>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Përshkrimi</mat-label>
      <textarea 
        matInput 
        formControlName="description" 
        rows="3"
        placeholder="Përshkruani qëllimin dhe rregullat e zgjedhjes...">
      </textarea>
      <mat-icon matSuffix>description</mat-icon>
      <mat-error>{{ getErrorMessage('description') }}</mat-error>
      <mat-hint>{{ electionForm.get('description')?.value?.length || 0 }}/500 karaktere</mat-hint>
    </mat-form-field>

    <div class="date-time-section">
      <h3>Data dhe Ora e Fillimit</h3>
      <div class="date-time-row">
        <mat-form-field appearance="outline">
          <mat-label>Data e Fillimit</mat-label>
          <input 
            matInput 
            [matDatepicker]="startPicker" 
            formControlName="startDate"
            [min]="minDate"
            [max]="maxDate">
          <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
          <mat-datepicker #startPicker></mat-datepicker>
          <mat-error>{{ getErrorMessage('startDate') }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Ora e Fillimit</mat-label>
          <input 
            matInput 
            type="time" 
            formControlName="startTime">
          <mat-icon matSuffix>schedule</mat-icon>
          <mat-error>{{ getErrorMessage('startTime') }}</mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="date-time-section">
      <h3>Data dhe Ora e Përfundimit</h3>
      <div class="date-time-row">
        <mat-form-field appearance="outline">
          <mat-label>Data e Përfundimit</mat-label>
          <input 
            matInput 
            [matDatepicker]="endPicker" 
            formControlName="endDate"
            [min]="minDate"
            [max]="maxDate">
          <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
          <mat-datepicker #endPicker></mat-datepicker>
          <mat-error>{{ getErrorMessage('endDate') }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Ora e Përfundimit</mat-label>
          <input 
            matInput 
            type="time" 
            formControlName="endTime">
          <mat-icon matSuffix>schedule</mat-icon>
          <mat-error>{{ getErrorMessage('endTime') }}</mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="info-message">
      <mat-icon>info</mat-icon>
      <p>Pas krijimit të zgjedhjes, do të mund të shtoni kandidatë dhe të regjistroni votues.</p>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">Anulo</button>
  <button 
    mat-raised-button 
    color="primary" 
    (click)="onSubmit()"
    [disabled]="electionForm.invalid">
    <mat-icon>add</mat-icon>
    Krijo Zgjedhjen
  </button>
</mat-dialog-actions>